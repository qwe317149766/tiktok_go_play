# Windows 环境示例（复制为 .env.windows 或 env.windows 后填写真实配置）

# 配置文件版本号：用于和 requirements.txt 同步（当前 curl_cffi 版本）
CURL_CFFI_VERSION=0.14.0

# 生成器开关
SAVE_TO_REDIS=1
SAVE_TO_FILE=1

# mwzzzh_spider 任务数：
# 默认直接复用 MAX_GENERATE（只改一个配置即可同时控制生成数量/任务数量）。
# 如需单独覆盖，再手动加一行：MWZZZH_TASKS=100

# 最多生成设备数量（上限 100000）
MAX_GENERATE=100000

# 生成并发数（线程）
# 统一并发主开关：
# - generate_devices_bulk.py：控制设备生成并发
# - mwzzzh_spider.py：控制网络并发（MAX_CONCURRENCY）
# - goPlay/demos/stats/dgmain3：如果不设置 STATS_CONCURRENCY，会回退使用 GEN_CONCURRENCY
GEN_CONCURRENCY=500
# stats 项目并发（可选；优先级高于 GEN_CONCURRENCY）
STATS_CONCURRENCY=500

# stats 设备连续失败阈值（用于“方式A：坏设备自动补位”）
# - 网络错误不会计入连续失败
# - 优先级：STATS_DEVICE_FAIL_THRESHOLD > DEVICE_FAIL_THRESHOLD > 默认 10
# STATS_DEVICE_FAIL_THRESHOLD=10

# stats 设备成功播放上限（达到后淘汰并补位；0=不启用）
# - 优先级：STATS_DEVICE_PLAY_MAX > DEVICE_PLAY_MAX > 默认 0
# STATS_DEVICE_PLAY_MAX=0
# stats 设备创建时间筛选：只使用 create_time 早于当前时间 N 小时的设备（适用于 file/redis）
# - 0=不筛选
# STATS_DEVICE_MIN_AGE_HOURS=0

# stats（Windows/非抢单模式）播放目标视频（视频ID）
# AWEME_ID=7569635953183100191

# stats（抢单模式）开关：默认 Linux=1，Windows=0
# 本地/Windows 想模拟抢单测试：把 STATS_ORDER_MODE 改成 1，并配置好 DB_* 指向 orders 表
STATS_ORDER_MODE=1
# 抢单模式 DB flush 间隔（秒）：每隔 N 秒把本轮新增 delivered 回写 MySQL，降低意外退出损失
STATS_ORDER_DB_FLUSH_SEC=5
# 抢单模式：允许重新抢 In progress 订单的“超时秒数”（进程崩溃/卡死恢复）
STATS_ORDER_STALE_SEC=120
# 抢单模式：轮询抢单间隔（毫秒）
STATS_ORDER_POLL_MS=500

# 抢单模式：订单进度实时写 Redis 的 key 前缀
# - 实际 key：{prefix}:{order_id}（HASH：delivered/total/updated_at）
REDIS_ORDER_PROGRESS_PREFIX=tiktok:order_progress
DEFAULT_COOKIES_JSON={"tt_csrf_token":"HLFByTUF-47G1XL7oRK_aHfiBcYMNuLREJDI","ttwid":"1%7CzQUBK2d5qqX6kP4Tb0YY6QqoOm0u4mxid5G29zEIM4s%7C1745522020%7C1ac601ecb030194ae507aeb90bb3938f2ba988c1d0c0c8656754bbc0fab0a06e","tt_chain_token":"omYR7QPGG0PoBFPZsa8JVQ","s_v_web_id":"verify_m9vqqszg_0Dv9umOq_uOPf_4uY4_9tdQ_DbBKksydK7xR","msToken":"8dRNQ42CwaGu4pSTg7jlyHM9A-HNjRmLhmwZ4xoggCUSV5n-VBNrzf8uTUmeQjV8YWGZUftkyB1HVZSSVDl4-c2lG_gU0rfJisL2rJ7sQaSbfX84vzIC2NS4FJ9bNhiw8REti_zG","passport_csrf_token":"9a49106049c500088ce50f14c97b356a","passport_csrf_token_default":"9a49106049c500088ce50f14c97b356a","d_ticket":"fadf6d1eba92cbc76bbbc99ae286193ee28e1","multi_sids":"6556891259310063625%3A10c6b0aef813856ebb3a6fef4e5bf5e0","cmpl_token":"AgQQAPPdF-RO0orAL3vOOJkw8msUUiKef53ZYNhwNg","sid_guard":"10c6b0aef813856ebb3a6fef4e5bf5e0%7C1745522061%7C15552000%7CTue%2C+21-Oct-2025+19%3A14%3A21+GMT","uid_tt":"fe3939b0c965ca30bd60501df1d6217153c35918b22a1f8290db27bb012a454e","uid_tt_ss":"fe3939b0c965ca30bd60501df1d6217153c35918b22a1f8290db27bb012a454e","sid_tt":"10c6b0aef813856ebb3a6fef4e5bf5e0","sessionid":"10c6b0aef813856ebb3a6fef4e5bf5e0","sessionid_ss":"10c6b0aef813856ebb3a6fef4e5bf5e0","sid_ucp_v1":"1.0.0-KDMzZGI0YWIxOWE2Y2Q2YjEwNzBmOTM0ZGYxNzNmZmM5YTUxOWI4MmEKGAiJgKmwxLuw_1oQjZuqwAYYsws4AUDqBxAEGgd1c2Vhc3Q1IiAxMGM2YjBhZWY4MTM4NTZlYmIzYTZmZWY0ZTViZjVlMA","ssid_ucp_v1":"1.0.0-KDMzZGI0YWIxOWE2Y2Q2YjEwNzBmOTM0ZGYxNzNmZmM5YTUxOWI4MmEKGAiJgKmwxLuw_1oQjZuqwAYYsws4AUDqBxAEGgd1c2Vhc3Q1IiAxMGM2YjBhZWY4MTM4NTZlYmIzYTZmZWY0ZTViZjVlMA","store-idc":"useast5","store-country-sign":"MEIEDCDhSXzE7SVO1zhzOQQgyOjtbbHxXnQlYos96hw_Mfapy9UbRWxHwMSlN-8KR60EEF18g7c0sbhlqwnTStqJj58","store-country-code":"us","store-country-code-src":"uid","tt-target-idc":"useast5","tt-target-idc-sign":"u1vYv7YwGh_jtxWvoGsmYXE032FY3h1EuN3SHdYy9gktqPOt1wvpuSabWxudUrgvDEWMSvItsQlCbsxBOUN3-hXr8168hD6pAjzC2y3AtysArmXOIgoVrVr-leE6F7f6HwOQwq4SHDHbOkbhucX7F5NjYJh5eW9FsgyRdpdEZuB1_Z2MZaenmhX1RMCmUL35bXfPI0fGhKJ22xTAQGOh5eVyhWlGDs6Zx_sBDhNggQNOO5YZnWuyto2Ug55oF0yZ46NN1FIQXRdAuLSnwyw6K4CJABH29V1gqY3wnnoedJCe0TRUPcpJOHSkcSe8swymUaKbyBwoA_wuNnp9kiOQ3Czn3rHvYy0v2xlKeUetY-BQ7eENGGvpgog2jdljQz75GAsfs1MPzrYA6AQS-9Dy_5pP-5Kxgdf4AMoO2Fq5BVDioCQhCNglcSSF9LFZQaKcowA6E3wja1vtLNfcSNwQVDLovLWeJ6MxlYQzDuhqk0YbGExkTDtBzHSwql-uB5ZT","device_id":"7496959979828626975","uid":"6556891259310063625","imApi":"https%3A%2F%2Fim-api.tiktok.com","userAgent":"Mozilla%2F5.0%20(Windows%20NT%2010.0%3B%20Win64%3B%20x64)%20AppleWebKit%2F537.36%20(KHTML%2C%20like%20Gecko)%20Chrome%2F132.0.0.0%20Safari%2F537.36","region":"US","lang":"en"}

# mwzzzh_spider 解析线程池大小（可选；不填则默认按 CPU 核心数自动推导：cores*2，范围 4~64）
# GEN_THREAD_POOL_SIZE=16

# 备份文件：每个文件最多条数（固定平均分到 10 个文件）
PER_FILE_MAX=10000

# Redis 最大保存设备数量（达到后按 use_count 最大淘汰）
REDIS_MAX_DEVICES=10000
# Redis 淘汰策略（默认 play：按播放次数最大淘汰；可选 use/attempt）
# REDIS_EVICT_POLICY=play


# Redis 配置（二选一：REDIS_URL 或 host/port/db）
# REDIS_URL=redis://:password@127.0.0.1:6379/0
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0
REDIS_USERNAME=
REDIS_PASSWORD=a123456
REDIS_SSL=0

# Redis 设备池 key 前缀 & 设备 id 字段
REDIS_DEVICE_POOL_KEY=tiktok:device_pool
# 默认用 cdid 做唯一标识（devices.py 里天然存在）；如果你的设备 JSON 里有 device_id 也可改成 device_id
REDIS_DEVICE_ID_FIELD=cdid


# startUp 注册 cookies 池（Go signup 写入、Go stats 读取）
REDIS_STARTUP_COOKIE_POOL_KEY=tiktok:startup_cookie_pool
# startUp 注册次数（用于生成/收集 cookies 的目标数）
STARTUP_REGISTER_COUNT=100
# signup 成功后是否把 cookies 写入 Redis（供 stats 使用）
SAVE_STARTUP_COOKIES_TO_REDIS=1
# stats 读取 cookies（推荐只用 COOKIES_SOURCE 控制，其他地方一致）
# - 推荐写法：COOKIES_SOURCE=redis
COOKIES_SOURCE=redis
# COOKIES_LIMIT=100

# 设备来源（Go signup / Go stats 读取设备的开关，推荐只用 DEVICES_SOURCE，其他地方一致）
# - 支持的取值：
#   - DEVICES_SOURCE=redis  ：从 Redis 设备池读取（Python 注册成功写入的设备池）
#   - DEVICES_SOURCE=file   ：从本地文件读取（signup 默认：goPlay/demos/signup/dgemail/data/devices.txt；stats 默认：goPlay/demos/stats/dgmain3/devices.txt）
#   - DEVICES_SOURCE=（不填/其它任意值） ：等价于 file
# - 兼容旧写法：DEVICES_FROM_REDIS=1（不推荐，仅兼容；会覆盖 DEVICES_SOURCE）
# - DEVICES_LIMIT：从 Redis 读取时的最大设备数量（0 表示不限制；默认会回退 MAX_GENERATE）
DEVICES_SOURCE=file
# DEVICES_LIMIT=100

# 数据库配置（后续 Go 项目读取使用；本脚本暂不使用）
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=root
DB_PASSWORD=123456
DB_NAME=tiktok_go_play

# Go API Server（api_server）
API_ADDR=:8080
# API_KEY 从数据库 api_keys 表读取，不再使用 env 配置

# API Admin（新增/追加 api_key + 额度的页面）
# 填“管理员明文密码的 MD5(hex小写)”，后端会用 MD5(你输入的密码) 做校验
# 示例：echo -n 123456 | md5sum
ADMIN_PASSWORD_MD5=

# API KEY Redis 永久缓存（api_server 使用）
REDIS_API_KEYS_KEY=tiktok:api_keys


